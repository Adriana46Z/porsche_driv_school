{% extends 'base.html' %}

{% block content %}
<!-- Hero Section - Full Width -->
<div class="hero-section text-center mb-5">
    <div class="container-fluid px-5 py-5">
        <h1 class="display-4 fw-bold">Porsche School</h1>
        <p class="lead fs-4">Excellence in driving. Performance in education.</p>
        <p class="fs-5">The first driving school that combines tradition with Porsche technology</p>

        <!-- Buton de login/register pentru vizitatori -->
        {% if not user.is_authenticated %}
        <div class="mt-4">
            <a href="{% url 'login' %}" class="btn btn-porsche btn-lg me-3">ğŸš€ Get Started</a>
            <a href="{% url 'register' %}" class="btn btn-outline-porsche btn-lg">ğŸ“ Create Account</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="container-fluid px-4">
    <!-- STATISTICI - doar pentru utilizatorii autentificaÈ›i -->
    {% if user.is_authenticated %}
    <div class="row mb-4 g-3">
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h3>ğŸ¯</h3>
                    <h4 class="text-primary">{{ total_quizzes }}</h4>
                    <p class="text-muted mb-0">Quizzes completed</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h3>â­</h3>
                    <h4 class="text-success">{% if best_score %}{{ best_score.score }}/{{ best_score.total_questions }}{% else %}0/0{% endif %}</h4>
                    <p class="text-muted mb-0">Best score</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h3>ğŸš€</h3>
                    <h4 class="text-warning">{{ courses.count }}</h4>
                    <p class="text-muted mb-0">Available courses</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- ConÈ›inut principal - Full Width -->
    <div class="row g-4">
        <!-- CURSURI - vizibile pentru TOÈšI -->
        <div class="col-lg-8">
            <div class="card h-100">
                <div class="card-header bg-dark text-white">
                    <h3 class="mb-0">ğŸ“š Premium Porsche Courses</h3>
                </div>
                <div class="card-body">
                    {% if courses %}
                    <div class="row g-3">
                        {% for course in courses %}
                        <div class="col-md-6">
                            <div class="card course-card difficulty-{{ course.difficulty }} h-100">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <h5 class="card-title">{{ course.title }}</h5>
                                        <span class="badge bg-{% if course.difficulty == 'beginner' %}success{% elif course.difficulty == 'intermediate' %}warning{% else %}danger{% endif %}">
                                            {{ course.get_difficulty_display }}
                                        </span>
                                    </div>
                                    <p class="card-text text-muted">{{ course.content|truncatewords:20 }}</p>

                                    <div class="d-grid gap-2">
                                        {% if course.pdf_file %}
                                        <a href="{{ course.pdf_file.url }}"
                                           class="btn btn-danger btn-sm"
                                           download
                                           target="_blank">
                                            ğŸ“¥ Download PDF Course
                                        </a>
                                        {% endif %}

                                        <a href="{% url 'course_detail' course.id %}"
                                           class="btn btn-porsche btn-sm">
                                            ğŸ“– Read Online
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-4">
                        <p class="text-muted">No courses available at the moment.</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- SIDEBAR -->
        <div class="col-lg-4">
            <!-- CHESTIONARE - diferit pentru autentificaÈ›i vs vizitatori -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">ğŸ“ Driving Quiz</h4>
                </div>
                <div class="card-body text-center">
                    {% if user.is_authenticated %}
                    <!-- Versiunea pentru utilizatorii logaÈ›i -->
                    <p class="fs-6">Test your knowledge with a complete 24-question quiz!</p>
                    <p class="text-muted small">Questions are randomly selected from all categories.</p>

                    <div class="d-grid gap-2">
                        <a href="{% url 'quiz' %}" class="btn btn-success btn-lg">ğŸ Start Quiz</a>
                        <a href="{% url 'quiz_history' %}" class="btn btn-outline-secondary">ğŸ“Š View History</a>
                    </div>

                    <div class="mt-3">
                        <small class="text-muted">
                            â±ï¸ Estimated duration: 30 minutes<br>
                            ğŸ“š All categories: Traffic, Signs, Safety, Porsche
                        </small>
                    </div>
                    {% else %}
                    <!-- Versiunea pentru vizitatori -->
                    <p class="fs-6">Ready to test your driving knowledge?</p>
                    <p class="text-muted small">Complete quizzes and track your progress</p>

                    <div class="d-grid gap-2">
                        <a href="{% url 'login' %}" class="btn btn-success btn-lg">ğŸ” Login to Start Quiz</a>
                        <a href="{% url 'register' %}" class="btn btn-outline-success">ğŸ“ Create Account</a>
                    </div>

                    <div class="mt-3">
                        <small class="text-muted">
                            âœ… Track your progress<br>
                            ğŸ† Earn achievements<br>
                            ğŸ“ˆ View detailed statistics
                        </small>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- MEMES - vizibile pentru TOÈšI -->
            <div class="card">
                <div class="card-header bg-warning text-dark">
                    <h4 class="mb-0">ğŸ˜„ Porsche Memes</h4>
                </div>
                <div class="card-body text-center">
                    <p class="fs-6">Have fun with the funniest car memes!</p>
                    <div class="d-grid">
                        <a href="{% url 'memes' %}" class="btn btn-warning btn-lg">ğŸ­ View all Memes</a>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">
                            ğŸ“¸ Collection of funny memes about cars and driving
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Stiluri pentru hero section cu Porsche */
.hero-section {
    background:
        linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    color: white;
    margin: 0;
    position: relative;
    overflow: hidden;
    min-height: 500px;
    display: flex;
    align-items: center;
}

.hero-section::before {
    content: 'ğŸï¸';
    font-size: 8rem;
    position: absolute;
    right: 50px;
    bottom: 20px;
    opacity: 0.3;
}

.hero-section .container-fluid {
    position: relative;
    z-index: 2;
}

/* Carduri fÄƒrÄƒ marginii exterioare */
.card {
    border: none;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    border-radius: 10px;
}

.course-card {
    transition: transform 0.3s ease;
}

.course-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

/* DificultÄƒÈ›i cursuri */
.difficulty-beginner { border-left: 4px solid #28a745; }
.difficulty-intermediate { border-left: 4px solid #ffc107; }
.difficulty-advanced { border-left: 4px solid #dc3545; }

/* Container fluid adjustments */
.container-fluid {
    max-width: 100%;
}

/* Butoane cursuri */
.btn-porsche {
    background: linear-gradient(45deg, #dc0032, #b30028);
    border: none;
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-porsche:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(220, 0, 50, 0.3);
    color: white;
}

/* Responsive */
@media (max-width: 768px) {
    .hero-section {
        min-height: 400px;
    }

    .hero-section::before {
        font-size: 4rem;
        right: 20px;
        bottom: 10px;
    }

    .hero-section h1 {
        font-size: 2.5rem;
    }
}
</style>
{% endblock %}